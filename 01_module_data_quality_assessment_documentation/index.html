<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation for the Background chapter and four FASTR modules."><link href=https://FASTR-Analytics.github.io/docs/01_module_data_quality_assessment_documentation/ rel=canonical><link href=../00_background_documentation/ rel=prev><link href=../02_module_data_quality_adjustments_documentation/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.23"><title>Module 1 · Data Quality Assessment - FASTR Methodology</title><link rel=stylesheet href=../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M64%20480c-35.3%200-64-28.7-64-64V96c0-35.3%2028.7-64%2064-64h320c35.3%200%2064%2028.7%2064%2064v213.5c0%2017-6.7%2033.3-18.7%2045.3L322.7%20461.3c-12%2012-28.3%2018.7-45.3%2018.7zm325.5-176H296c-13.3%200-24%2010.7-24%2024v93.5z%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M384%20512H96c-53%200-96-43-96-96V96C0%2043%2043%200%2096%200h304c26.5%200%2048%2021.5%2048%2048v288c0%2020.9-13.4%2038.7-32%2045.3V448c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032zM96%20384c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032h256v-64zm32-232c0%2013.3%2010.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24H152c-13.3%200-24%2010.7-24%2024m24%2072c-13.3%200-24%2010.7-24%2024s10.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24z%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m-32-352a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200m-8%2064h48c13.3%200%2024%2010.7%2024%2024v88h8c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-80c-13.3%200-24-10.7-24-24s10.7-24%2024-24h24v-64h-24c-13.3%200-24-10.7-24-24s10.7-24%2024-24%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M461.2%2018.9C472.7%2024%20480%2035.4%20480%2048v416c0%2012.6-7.3%2024-18.8%2029.1s-24.8%203.2-34.3-5.1l-46.6-40.7c-43.6-38.1-98.7-60.3-156.4-63V480c0%2017.7-14.3%2032-32%2032h-32c-17.7%200-32-14.3-32-32v-96C57.3%20384%200%20326.7%200%20256s57.3-128%20128-128h84.5c61.8-.2%20121.4-22.7%20167.9-63.3L427%2024c9.4-8.3%2022.9-10.2%2034.3-5.1zM224%20320v.2c70.3%202.7%20137.8%2028.5%20192%2073.4V118.3c-54.2%2044.9-121.7%2070.7-192%2073.4z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M434.8%2070.1c14.3%2010.4%2017.5%2030.4%207.1%2044.7l-256%20352c-5.5%207.6-14%2012.3-23.4%2013.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8%200-45.3s32.8-12.5%2045.3%200l101.5%20101.5%20234-321.7c10.4-14.3%2030.4-17.5%2044.7-7.1z%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m0-336c-17.7%200-32%2014.3-32%2032%200%2013.3-10.7%2024-24%2024s-24-10.7-24-24c0-44.2%2035.8-80%2080-80s80%2035.8%2080%2080c0%2047.2-36%2067.2-56%2074.5v3.8c0%2013.3-10.7%2024-24%2024s-24-10.7-24-24v-8.1c0-20.5%2014.8-35.2%2030.1-40.2%206.4-2.1%2013.2-5.5%2018.2-10.3%204.3-4.2%207.7-10%207.7-19.6%200-17.7-14.3-32-32-32zm-32%20192a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%200c14.7%200%2028.2%208.1%2035.2%2021l216%20400c6.7%2012.4%206.4%2027.4-.8%2039.5S486.1%20480%20472%20480H40c-14.1%200-27.2-7.4-34.4-19.5s-7.5-27.1-.8-39.5l216-400c7-12.9%2020.5-21%2035.2-21m0%20352a32%2032%200%201%200%200%2064%2032%2032%200%201%200%200-64m0-192c-18.2%200-32.7%2015.5-31.4%2033.7l7.4%20104c.9%2012.5%2011.4%2022.3%2023.9%2022.3%2012.6%200%2023-9.7%2023.9-22.3l7.4-104c1.3-18.2-13.1-33.7-31.4-33.7z%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M480-16c6.9%200%2013%204.4%2015.2%2010.9l13.5%2040.4%2040.4%2013.5C555.6%2051%20560%2057.1%20560%2064s-4.4%2013-10.9%2015.2l-40.4%2013.5-13.5%2040.4c-2.2%206.5-8.3%2010.9-15.2%2010.9s-13-4.4-15.2-10.9l-13.5-40.4-40.4-13.5C404.4%2077%20400%2070.9%20400%2064s4.4-13%2010.9-15.2l40.4-13.5%2013.5-40.4C467-11.6%20473.1-16%20480-16M321.4%2097.4c12.5-12.5%2032.8-12.5%2045.3%200l80%2080c12.5%2012.5%2012.5%2032.8%200%2045.3l-10.9%2010.9c7.9%2022%2012.2%2045.7%2012.2%2070.5%200%20114.9-93.1%20208-208%20208S32%20418.9%2032%20304%20125.1%2096%20240%2096c24.7%200%2048.5%204.3%2070.5%2012.3zM144%20304c0-53%2043-96%2096-96%2013.3%200%2024-10.7%2024-24s-10.7-24-24-24c-79.5%200-144%2064.5-144%20144%200%2013.3%2010.7%2024%2024%2024s24-10.7%2024-24%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M416%20427.4c58.5-44%2096-111.6%2096-187.4C512%20107.5%20397.4%200%20256%200S0%20107.5%200%20240c0%2075.8%2037.5%20143.4%2096%20187.4V464c0%2026.5%2021.5%2048%2048%2048h32v-40c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v40h64v-40c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v40h32c26.5%200%2048-21.5%2048-48zM96%20256a64%2064%200%201%201%20128%200%2064%2064%200%201%201-128%200m256-64a64%2064%200%201%201%200%20128%2064%2064%200%201%201%200-128%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M352%200c0-17.7-14.3-32-32-32s-32%2014.3-32%2032v64h-96c-53%200-96%2043-96%2096v224c0%2053%2043%2096%2096%2096h256c53%200%2096-43%2096-96V160c0-53-43-96-96-96h-96zM160%20368c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24M224%20176a48%2048%200%201%201%200%2096%2048%2048%200%201%201%200-96m144%2048a48%2048%200%201%201%2096%200%2048%2048%200%201%201-96%200m-304%200c0-17.7-14.3-32-32-32S0%20206.3%200%20224v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32zm544-32c-17.7%200-32%2014.3-32%2032v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32v-96c0-17.7-14.3-32-32-32%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M288%200H128c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032v151.5L7.5%20426.3C2.6%20435%200%20444.7%200%20454.7%200%20486.4%2025.6%20512%2057.3%20512h333.4c31.6%200%2057.3-25.6%2057.3-57.3%200-10-2.6-19.8-7.5-28.4L320%20215.5V64c17.7%200%2032-14.3%2032-32S337.7%200%20320%200zm-96%20215.5V64h64v151.5c0%2011.1%202.9%2022.1%208.4%2031.8L306%20320H142l41.6-72.7c5.5-9.7%208.4-20.6%208.4-31.8%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20216C0%20149.7%2053.7%2096%20120%2096h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064H64c-35.3%200-64-28.7-64-64zm256%200c0-66.3%2053.7-120%20120-120h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064h-64c-35.3%200-64-28.7-64-64z%22/%3E%3C/svg%3E');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=teal> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#module-1-data-quality-assessment-dqa class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="FASTR Methodology" class="md-header__button md-logo" aria-label="FASTR Methodology" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> FASTR Methodology </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Module 1 · Data Quality Assessment </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=teal aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=teal aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/FASTR-Analytics/docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> FASTR-Analytics/docs </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../00_background_documentation/ class=md-tabs__link> Background </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Module 1 · Data Quality Assessment </a> </li> <li class=md-tabs__item> <a href=../02_module_data_quality_adjustments_documentation/ class=md-tabs__link> Module 2 · Data Quality Adjustments </a> </li> <li class=md-tabs__item> <a href=../03_module_service_utilization_documentation/ class=md-tabs__link> Module 3 · Service Utilization </a> </li> <li class=md-tabs__item> <a href=../04_module_coverage_estimates_documentation/ class=md-tabs__link> Module 4 · Coverage Estimates </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="FASTR Methodology" class="md-nav__button md-logo" aria-label="FASTR Methodology" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg> </a> FASTR Methodology </label> <div class=md-nav__source> <a href=https://github.com/FASTR-Analytics/docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> FASTR-Analytics/docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../00_background_documentation/ class=md-nav__link> <span class=md-ellipsis> Background </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Module 1 · Data Quality Assessment </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Module 1 · Data Quality Assessment </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-overview-what-why class=md-nav__link> <span class=md-ellipsis> 1. Overview (What &amp; Why) </span> </a> <nav class=md-nav aria-label="1. Overview (What & Why)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-does-this-module-do class=md-nav__link> <span class=md-ellipsis> What does this module do? </span> </a> </li> <li class=md-nav__item> <a href=#why-is-it-needed-in-the-fastr-pipeline class=md-nav__link> <span class=md-ellipsis> Why is it needed in the FASTR pipeline? </span> </a> </li> <li class=md-nav__item> <a href=#quick-summary class=md-nav__link> <span class=md-ellipsis> Quick Summary </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-how-it-works class=md-nav__link> <span class=md-ellipsis> 2. How It Works </span> </a> <nav class=md-nav aria-label="2. How It Works"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#high-level-workflow class=md-nav__link> <span class=md-ellipsis> High-Level Workflow </span> </a> </li> <li class=md-nav__item> <a href=#workflow-diagram class=md-nav__link> <span class=md-ellipsis> Workflow Diagram </span> </a> </li> <li class=md-nav__item> <a href=#key-decision-points class=md-nav__link> <span class=md-ellipsis> Key Decision Points </span> </a> </li> <li class=md-nav__item> <a href=#what-happens-to-the-data class=md-nav__link> <span class=md-ellipsis> What Happens to the Data </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-detailed-reference class=md-nav__link> <span class=md-ellipsis> 3. Detailed Reference </span> </a> <nav class=md-nav aria-label="3. Detailed Reference"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration-parameters class=md-nav__link> <span class=md-ellipsis> Configuration Parameters </span> </a> </li> <li class=md-nav__item> <a href=#inputoutput-specifications class=md-nav__link> <span class=md-ellipsis> Input/Output Specifications </span> </a> </li> <li class=md-nav__item> <a href=#key-functions-documentation class=md-nav__link> <span class=md-ellipsis> Key Functions Documentation </span> </a> </li> <li class=md-nav__item> <a href=#statistical-methods-algorithms class=md-nav__link> <span class=md-ellipsis> Statistical Methods &amp; Algorithms </span> </a> </li> <li class=md-nav__item> <a href=#code-examples class=md-nav__link> <span class=md-ellipsis> Code Examples </span> </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=#usage-notes class=md-nav__link> <span class=md-ellipsis> Usage Notes </span> </a> </li> <li class=md-nav__item> <a href=#data-quality-metrics-summary class=md-nav__link> <span class=md-ellipsis> Data Quality Metrics Summary </span> </a> </li> <li class=md-nav__item> <a href=#analysis-outputs-and-visualization class=md-nav__link> <span class=md-ellipsis> Analysis Outputs and Visualization </span> </a> </li> <li class=md-nav__item> <a href=#execution-workflow class=md-nav__link> <span class=md-ellipsis> Execution Workflow </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#version-history class=md-nav__link> <span class=md-ellipsis> Version History </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../02_module_data_quality_adjustments_documentation/ class=md-nav__link> <span class=md-ellipsis> Module 2 · Data Quality Adjustments </span> </a> </li> <li class=md-nav__item> <a href=../03_module_service_utilization_documentation/ class=md-nav__link> <span class=md-ellipsis> Module 3 · Service Utilization </span> </a> </li> <li class=md-nav__item> <a href=../04_module_coverage_estimates_documentation/ class=md-nav__link> <span class=md-ellipsis> Module 4 · Coverage Estimates </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=module-1-data-quality-assessment-dqa>Module 1: Data Quality Assessment (DQA)<a class=headerlink href=#module-1-data-quality-assessment-dqa title="Anchor link to this section">&para;</a></h1> <h2 id=1-overview-what-why>1. Overview (What &amp; Why)<a class=headerlink href=#1-overview-what-why title="Anchor link to this section">&para;</a></h2> <h3 id=what-does-this-module-do>What does this module do?<a class=headerlink href=#what-does-this-module-do title="Anchor link to this section">&para;</a></h3> <p>The Data Quality Assessment (DQA) module evaluates the reliability of Health Management Information System (HMIS) data from health facilities. It acts as a quality control checkpoint in the FASTR pipeline, examining monthly facility reports to identify data issues before the information is used for decision-making.</p> <p>The module assesses data quality through three complementary lenses: <strong>detecting outliers</strong> (unusually high values that may indicate reporting errors), <strong>assessing completeness</strong> (whether facilities consistently submit their reports), and <strong>measuring consistency</strong> (whether related health indicators align with expected patterns). These assessments are combined into an overall DQA score that provides a single measure of data reliability.</p> <p>Routinely reported health facility data are an important source for health indicators at the facility and population levels. Health facilities report on events such as immunizations given or live births attended by a skilled provider. As with any data, quality is an issue. The FASTR approach conducts an analysis of monthly data by facility and by indicator to assess data quality. Results are presented as annual estimates but may comprise a partial year of data given the availability of data at the time the analysis is conducted (e.g., an analysis conducted in June 2024 may contain data from January-May 2024, and this will be presented as the analysis for 2024).</p> <h3 id=why-is-it-needed-in-the-fastr-pipeline>Why is it needed in the FASTR pipeline?<a class=headerlink href=#why-is-it-needed-in-the-fastr-pipeline title="Anchor link to this section">&para;</a></h3> <p>Data quality directly impacts the reliability of health indicators and coverage estimates. Before calculating service utilization rates or estimating population coverage, we must ensure the underlying facility data is trustworthy. This module identifies problematic data patterns that could skew results, allowing analysts to make informed decisions about data adjustments or exclusions in subsequent pipeline steps.</p> <h3 id=quick-summary>Quick Summary<a class=headerlink href=#quick-summary title="Anchor link to this section">&para;</a></h3> <table> <thead> <tr> <th>Component</th> <th>Details</th> </tr> </thead> <tbody> <tr> <td><strong>Inputs</strong></td> <td>Raw HMIS data (<code>hmis_ISO3.csv</code>) containing facility service volumes by month and indicator<br>Geographic/administrative area identifiers<br>Standardized indicator names</td> </tr> <tr> <td><strong>Outputs</strong></td> <td>- Outlier flags and lists<br>- Completeness status by facility-indicator-month<br>- Consistency results at geographic level<br>- Overall DQA scores</td> </tr> <tr> <td><strong>Purpose</strong></td> <td>Evaluate HMIS data reliability through outlier detection, completeness assessment, and consistency checking to ensure trustworthy inputs for coverage estimation</td> </tr> </tbody> </table> <hr> <h2 id=2-how-it-works>2. How It Works<a class=headerlink href=#2-how-it-works title="Anchor link to this section">&para;</a></h2> <h3 id=high-level-workflow>High-Level Workflow<a class=headerlink href=#high-level-workflow title="Anchor link to this section">&para;</a></h3> <p>The module follows a logical sequence of quality checks, building from individual data points to an overall quality score:</p> <p><strong>Step 1: Load and Prepare Data</strong> The module reads monthly facility reports and organizes them for analysis. It converts dates to a standard format and identifies which geographic areas and health indicators are present in the dataset.</p> <p><strong>Step 2: Detect Outliers</strong> For each health facility and indicator (like pentavalent vaccine doses or antenatal care visits), the module identifies unusually high values that might indicate data entry errors. It uses two methods: statistical outliers (values far from the facility's typical volume) and proportional outliers (a single month accounting for most of the year's services).</p> <p><strong>Step 3: Assess Completeness</strong> The module checks whether facilities are consistently reporting data. It creates a complete timeline for each facility and indicator, identifying months with missing reports. Facilities that stop reporting for 6+ months are flagged as inactive rather than incomplete.</p> <p><strong>Step 4: Measure Consistency</strong> Related indicators should follow predictable patterns. For example, more women should receive their first antenatal visit (ANC1) than their fourth visit (ANC4). The module calculates ratios between paired indicators at the district level (to account for patients visiting multiple facilities) and flags relationships that don't meet expectations.</p> <p><strong>Step 5: Validate Indicator Availability</strong> Before running consistency checks, the module verifies that the required indicator pairs actually exist in the dataset. Missing indicators are handled gracefully, with the analysis adapting to available data.</p> <p><strong>Step 6: Calculate DQA Scores</strong> For a defined set of core indicators (typically pentavalent vaccine, first antenatal visit, and outpatient visits), the module combines the three quality dimensions. A facility-month receives a perfect DQA score only if all core indicators are complete, free of outliers, and meet consistency benchmarks.</p> <p><strong>Step 7: Export Results</strong> The module produces several output files containing outlier lists, completeness flags, consistency results, and final DQA scores. These outputs inform subsequent modules and provide actionable insights for data quality improvement.</p> <h3 id=workflow-diagram>Workflow Diagram<a class=headerlink href=#workflow-diagram title="Anchor link to this section">&para;</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>┌─────────────────────────────────────────────────────────────────┐
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>│                    INPUT: Monthly Facility Data                 │
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>│         (facility_id, period_id, indicator, count)              │
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>└────────────────────────┬────────────────────────────────────────┘
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>                         │
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>                         ▼
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>         ┌───────────────────────────────┐
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>         │   Data Loading &amp; Preparation  │
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>         │  • Convert dates              │
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>         │  • Detect geography           │
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>         │  • Create composite indicators│
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>         └───────────┬───────────────────┘
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>                     │
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>                     ▼
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>         ┌───────────────────────────────┐
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>         │    Outlier Detection          │
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>         │  • Calculate median &amp; MAD     │
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>         │  • Flag statistical outliers  │
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>         │  • Flag proportional outliers │
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>         └───────────┬───────────────────┘
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>                     │
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>                     ▼
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>         ┌───────────────────────────────┐
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>         │   Completeness Assessment     │
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>         │  • Generate full time series  │
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>         │  • Identify missing reports   │
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>         │  • Flag inactive facilities   │
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>         └───────────┬───────────────────┘
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>                     │
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>                     ▼
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>         ┌───────────────────────────────┐
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>         │   Consistency Analysis        │
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a>         │  • Aggregate to district level│
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>         │  • Calculate indicator ratios │
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>         │  • Apply benchmarks           │
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a>         │  • Assign to facilities       │
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>         └───────────┬───────────────────┘
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a>                     │
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a>                     ▼
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a>         ┌───────────────────────────────┐
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a>         │      DQA Scoring              │
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a>         │  • Filter core indicators     │
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a>         │  • Combine quality dimensions │
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>         │  • Calculate composite score  │
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a>         └───────────┬───────────────────┘
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a>                     │
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a>                     ▼
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a>┌────────────────────────────────────────────────────────────────┐
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a>│                         OUTPUTS                                │
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a>│  • Outlier flags &amp; lists                                       │
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a>│  • Completeness status                                         │
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a>│  • Consistency results                                         │
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a>│  • DQA scores                                                  │
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>└────────────────────────────────────────────────────────────────┘
</span></code></pre></div> <h3 id=key-decision-points>Key Decision Points<a class=headerlink href=#key-decision-points title="Anchor link to this section">&para;</a></h3> <p><strong>When is a value considered an outlier?</strong> An observation is flagged as an outlier if it meets EITHER of two criteria AND the count exceeds 100: - It's more than 10 times the Median Absolute Deviation (MAD) away from the facility's typical volume, OR - It represents more than 80% of that facility's annual total for that indicator</p> <p><strong>Why measure consistency at the district level instead of facility level?</strong> Patients often visit different facilities within their local district for different services. A woman might get her first antenatal visit at one health center but deliver at a district hospital. Measuring consistency at the district level accounts for this patient movement and provides a more accurate picture of service utilization patterns.</p> <p><strong>What happens when required indicators are missing?</strong> The module adapts to available data. If consistency pairs cannot be evaluated, the DQA score is calculated using only completeness and outlier checks. The analysis continues with the dimensions that can be assessed.</p> <p><strong>How are inactive facilities handled?</strong> If a facility doesn't report for 6 or more consecutive months at the start or end of their reporting period, those months are flagged as "inactive" rather than "incomplete." This prevents penalizing facilities that haven't yet started reporting or have permanently closed.</p> <h3 id=what-happens-to-the-data>What Happens to the Data<a class=headerlink href=#what-happens-to-the-data title="Anchor link to this section">&para;</a></h3> <p><strong>Transformation Overview:</strong></p> <p>The module transforms raw facility reports into quality-flagged datasets:</p> <ol> <li><strong>Input Format</strong>: Monthly rows with facility ID, period, indicator name, and count</li> <li><strong>Enrichment</strong>: Adds calculated fields like median volume, MAD residuals, proportional contributions</li> <li><strong>Completion</strong>: Generates explicit rows for missing months (turning implicit gaps into explicit records)</li> <li><strong>Aggregation</strong>: Rolls up facility data to district level for consistency calculations</li> <li><strong>Flagging</strong>: Adds binary quality flags (outlier yes/no, complete yes/no, consistent yes/no)</li> <li><strong>Scoring</strong>: Combines flags into continuous scores (0-1) and binary pass/fail indicators</li> <li><strong>Output Format</strong>: Multiple files optimized for different use cases (quick outlier review, full analysis, downstream modules)</li> </ol> <p>The data flows through the module in long format (one row per facility-indicator-period combination) and emerges with quality dimensions that subsequent modules use to weight, adjust, or exclude observations.</p> <hr> <h2 id=3-detailed-reference>3. Detailed Reference<a class=headerlink href=#3-detailed-reference title="Anchor link to this section">&para;</a></h2> <p>This section provides technical details for implementers, developers, and analysts who need to understand the underlying methodology.</p> <h3 id=configuration-parameters>Configuration Parameters<a class=headerlink href=#configuration-parameters title="Anchor link to this section">&para;</a></h3> <p>The module uses several configurable parameters that control analysis behavior:</p> <details open=open> <summary>Geographic Settings</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># Country identifier</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=n>COUNTRY_ISO3</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;GIN&quot;</span><span class=w>  </span><span class=c1># ISO3 country code</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=c1># Geographic level for consistency analysis</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=n>GEOLEVEL</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;admin_area_3&quot;</span><span class=w>  </span><span class=c1># Admin level (1=national, 2=region, 3=district, etc.)</span>
</span></code></pre></div> <p>The <code>GEOLEVEL</code> parameter determines the aggregation level for consistency analysis. Lower administrative levels (3-4) capture local patterns but may have sparse data. Higher levels (2) provide more stable estimates but may mask local inconsistencies.</p> </details> <details> <summary>Outlier Detection Parameters</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># Proportion threshold for outlier detection</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=n>OUTLIER_PROPORTION_THRESHOLD</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>0.8</span><span class=w>  </span><span class=c1># Flag if single month &gt; 80% of annual total</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=c1># Minimum count to consider for outlier flagging</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=n>MINIMUM_COUNT_THRESHOLD</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>100</span><span class=w>  </span><span class=c1># Only flag outliers with count &gt;= 100</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1># Number of Median Absolute Deviations for statistical outlier detection</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=n>MADS</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>10</span><span class=w>  </span><span class=c1># Flag if value &gt; 10 MADs from median</span>
</span></code></pre></div> <p><strong>Tuning Guidance:</strong> - <strong>More sensitive detection</strong>: Lower <code>OUTLIER_PROPORTION_THRESHOLD</code> to 0.6-0.7, reduce <code>MADS</code> to 8 - <strong>Less sensitive detection</strong>: Increase <code>OUTLIER_PROPORTION_THRESHOLD</code> to 0.9, increase <code>MADS</code> to 12-15 - <strong>Small facilities</strong>: Lower <code>MINIMUM_COUNT_THRESHOLD</code> to 50 - <strong>Large facilities only</strong>: Increase <code>MINIMUM_COUNT_THRESHOLD</code> to 200+</p> </details> <details> <summary>DQA Indicator Selection</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># Core indicators used for DQA scoring</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=n>DQA_INDICATORS</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=s>&quot;penta1&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;anc1&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;opd&quot;</span><span class=p>)</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=c1># Consistency pairs to evaluate</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=n>CONSISTENCY_PAIRS_USED</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=s>&quot;penta&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;anc&quot;</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Standard Indicator Sets:</strong> - <strong>Maternal-child focus</strong>: <code>c("anc1", "anc4", "delivery", "penta1", "penta3")</code> - <strong>Immunization focus</strong>: <code>c("bcg", "penta1", "penta3", "measles1")</code> - <strong>Comprehensive</strong>: <code>c("penta1", "anc1", "opd", "delivery", "pnc1")</code></p> </details> <details> <summary>Consistency Benchmark Ranges</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=n>all_consistency_ranges</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>list</span><span class=p>(</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=n>pair_penta</span><span class=w>    </span><span class=o>=</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=n>lower</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0.95</span><span class=p>,</span><span class=w> </span><span class=n>upper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>Inf</span><span class=p>),</span><span class=w>  </span><span class=c1># Penta1 &gt;= 0.95 * Penta3</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>  </span><span class=n>pair_anc</span><span class=w>      </span><span class=o>=</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=n>lower</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0.95</span><span class=p>,</span><span class=w> </span><span class=n>upper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>Inf</span><span class=p>),</span><span class=w>  </span><span class=c1># ANC1 &gt;= 0.95 * ANC4</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>  </span><span class=n>pair_delivery</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=n>lower</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0.7</span><span class=p>,</span><span class=w> </span><span class=n>upper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1.3</span><span class=p>),</span><span class=w>   </span><span class=c1># 0.7 &lt;= BCG/Delivery &lt;= 1.3</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>  </span><span class=n>pair_malaria</span><span class=w>  </span><span class=o>=</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=n>lower</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0.9</span><span class=p>,</span><span class=w> </span><span class=n>upper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1.1</span><span class=p>)</span><span class=w>    </span><span class=c1># Malaria indicators within 10%</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=p>)</span>
</span></code></pre></div> <p>The ranges reflect programmatic expectations. For example, ANC1 should always be at least 95% of ANC4 (more women start care than complete four visits). The 5% tolerance accounts for data entry variations. BCG, as a birth dose vaccine, should approximately equal facility deliveries, with 30% tolerance for variation.</p> </details> <h3 id=inputoutput-specifications>Input/Output Specifications<a class=headerlink href=#inputoutput-specifications title="Anchor link to this section">&para;</a></h3> <h4 id=input-file-structure>Input File Structure<a class=headerlink href=#input-file-structure title="Anchor link to this section">&para;</a></h4> <p><strong>Required File</strong>: <code>hmis_[COUNTRY_ISO3].csv</code></p> <p><strong>Required Columns:</strong> - <code>facility_id</code> (character/integer): Unique identifier for each health facility - <code>period_id</code> (integer): Time period in YYYYMM format (e.g., 202401 for January 2024) - <code>indicator_common_id</code> (character): Standardized indicator names (e.g., "penta1", "anc1", "opd") - <code>count</code> (numeric): Service volume or count for the indicator - <code>admin_area_1</code> through <code>admin_area_8</code> (character): Geographic/administrative area columns</p> <p><strong>Format Example:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>facility_id,period_id,indicator_common_id,count,admin_area_1,admin_area_2,admin_area_3
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>FAC001,202401,penta1,45,Country_A,Province_A,District_A
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>FAC001,202401,anc1,67,Country_A,Province_A,District_A
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>FAC001,202402,penta1,52,Country_A,Province_A,District_A
</span></code></pre></div> <p><strong>Data Requirements:</strong> - At least 12 months of data recommended for robust outlier detection - Missing values represented as NA or absent rows (both handled) - Zero counts should be explicit zeros, not missing - Geographic columns detected automatically (columns 2-8 are optional)</p> <h4 id=output-files>Output Files<a class=headerlink href=#output-files title="Anchor link to this section">&para;</a></h4> <details> <summary>M1_output_outlier_list.csv - Flagged Outliers Only</summary> <p><strong>Purpose</strong>: Quick reference list of only the observations flagged as outliers</p> <p><strong>Columns:</strong></p> <ul> <li><code>facility_id</code>: Facility identifier</li> <li><code>admin_area_[2-8]</code>: Geographic areas (dynamically included based on data)</li> <li><code>indicator_common_id</code>: Health indicator name</li> <li><code>period_id</code>: Time period (YYYYMM)</li> <li><code>year</code>, <code>month</code>: Extracted time components</li> <li><code>count</code>: Reported service volume</li> <li><code>median_volume</code>: Facility-indicator median</li> <li><code>mad_volume</code>: Median Absolute Deviation</li> <li><code>mad_residual</code>: Standardized residual</li> <li><code>pc</code>: Proportion of annual total</li> <li><code>outlier_mad</code>: MAD-based outlier flag</li> <li><code>outlier_pc</code>: Proportion-based outlier flag</li> <li><code>outlier_flag</code>: Final combined outlier flag</li> </ul> <p><strong>Use Case</strong>: Data managers reviewing specific outliers for investigation or correction</p> </details> <details> <summary>M1_output_outliers.csv - All Records with Outlier Flags</summary> <p><strong>Purpose</strong>: Complete dataset with outlier metrics for all facility-indicator-period combinations</p> <p><strong>Columns</strong>: Same as outlier_list.csv but includes all observations</p> <p><strong>Use Case</strong>:</p> <ul> <li>Input for Module 2 (Data Quality Adjustments)</li> <li>Statistical analysis of outlier patterns</li> <li>Generating visualizations of outlier prevalence</li> </ul> </details> <details> <summary>M1_output_completeness.csv - Completeness Status</summary> <p><strong>Purpose</strong>: Completeness flags for all facility-indicator-period combinations, including explicitly created records for missing months</p> <p><strong>Columns:</strong></p> <ul> <li><code>facility_id</code>: Facility identifier</li> <li><code>admin_area_[2-8]</code>: Geographic areas</li> <li><code>indicator_common_id</code>: Health indicator name</li> <li><code>period_id</code>: Time period (YYYYMM)</li> <li><code>year</code>, <code>month</code>, <code>quarter_id</code>: Time components</li> <li><code>count</code>: Reported volume (NA if missing)</li> <li><code>completeness_flag</code>: 0=Incomplete, 1=Complete, 2=Inactive (removed from output)</li> </ul> <p><strong>Special Features</strong>:</p> <ul> <li>Contains explicit rows for non-reporting months</li> <li>Inactive periods (6+ months at start/end) excluded</li> <li>Full time series for each facility-indicator combination</li> </ul> <p><strong>Use Case</strong>:</p> <ul> <li>Calculating completeness percentages</li> <li>Identifying reporting gaps</li> <li>Trend analysis of reporting behavior</li> </ul> </details> <details> <summary>M1_output_consistency_geo.csv - Geographic-Level Consistency</summary> <p><strong>Purpose</strong>: Consistency ratios calculated at the specified geographic level (e.g., district)</p> <p><strong>Columns:</strong></p> <ul> <li><code>admin_area_1</code> through <code>admin_area_[X]</code>: Geographic identifiers up to specified GEOLEVEL</li> <li><code>period_id</code>: Time period (YYYYMM)</li> <li><code>ratio_type</code>: Name of consistency pair (e.g., "pair_penta", "pair_anc")</li> <li><code>consistency_ratio</code>: Calculated ratio value</li> <li><code>sconsistency</code>: Binary flag (1=consistent, 0=inconsistent, NA=cannot calculate)</li> </ul> <p><strong>Format</strong>: Long format with one row per geographic area-period-ratio type</p> <p><strong>Use Case</strong>:</p> <ul> <li>Understanding district-level service delivery patterns</li> <li>Identifying geographic areas with consistency issues</li> <li>Creating consistency heatmaps by zone</li> </ul> </details> <details> <summary>M1_output_consistency_facility.csv - Facility-Level Consistency</summary> <p><strong>Purpose</strong>: Geographic consistency results expanded to facility level, pivoted to wide format</p> <p><strong>Columns:</strong></p> <ul> <li><code>facility_id</code>: Facility identifier</li> <li><code>period_id</code>: Time period</li> <li><code>pair_[X]</code>: One column per consistency pair with flag values</li> </ul> <p><strong>Format</strong>: Wide format with one row per facility-period</p> <p><strong>Use Case</strong>:</p> <ul> <li>Input for DQA scoring</li> <li>Merging consistency flags with facility-level analyses</li> <li>Facility-specific quality reports</li> </ul> </details> <details> <summary>M1_output_dqa.csv - Final DQA Scores</summary> <p><strong>Purpose</strong>: Composite data quality scores by facility and time period</p> <p><strong>Columns:</strong></p> <ul> <li><code>facility_id</code>: Facility identifier</li> <li><code>admin_area_[2-8]</code>: Geographic areas</li> <li><code>period_id</code>: Time period (YYYYMM)</li> <li><code>completeness_outlier_score</code>: Proportion of DQA indicators passing completeness &amp; outlier checks (0-1)</li> <li><code>consistency_score</code>: Proportion of consistency pairs passing benchmarks (0-1, or NA if no pairs)</li> <li><code>dqa_mean</code>: Average of component scores (0-1)</li> <li><code>dqa_score</code>: Binary overall pass/fail (1 = all checks passed, 0 = any check failed)</li> </ul> <p><strong>Use Case</strong>:</p> <ul> <li>Filtering data for subsequent modules (e.g., only use facility-months with dqa_score=1)</li> <li>Tracking data quality trends over time</li> <li>Identifying facilities needing data quality improvement support</li> </ul> </details> <h3 id=key-functions-documentation>Key Functions Documentation<a class=headerlink href=#key-functions-documentation title="Anchor link to this section">&para;</a></h3> <details> <summary>load_and_preprocess_data()</summary> <p><strong>Signature</strong>: <code>load_and_preprocess_data(file_path)</code></p> <p><strong>Purpose</strong>: Loads HMIS data and prepares it for analysis by creating necessary date fields and composite indicators</p> <p><strong>Parameters:</strong></p> <ul> <li><code>file_path</code> (character): Path to HMIS CSV file</li> </ul> <p><strong>Returns</strong>: List containing:</p> <ul> <li><code>data</code>: Preprocessed dataframe with date field added</li> <li><code>geo_cols</code>: Vector of detected geographic column names</li> </ul> <p><strong>Process:</strong> 1. Reads CSV file with HMIS data 2. Converts <code>period_id</code> (YYYYMM format) to Date objects for temporal ordering 3. Detects all administrative area columns (admin_area_1 through admin_area_8) 4. Creates composite malaria indicator if component indicators exist: - Combines <code>rdt_positive</code> + <code>micro_positive</code> into <code>rdt_positive_plus_micro</code> - This composite is used for malaria consistency checks</p> <p><strong>Example:</strong></p> <div class="language-r highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=n>inputs</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>load_and_preprocess_data</span><span class=p>(</span><span class=s>&quot;hmis_ISO3.csv&quot;</span><span class=p>)</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=n>data</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>inputs</span><span class=o>$</span><span class=n>data</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=n>geo_cols</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>inputs</span><span class=o>$</span><span class=n>geo_cols</span>
</span></code></pre></div> </details> <details> <summary>validate_consistency_pairs()</summary> <p><strong>Signature</strong>: <code>validate_consistency_pairs(consistency_params, data)</code></p> <p><strong>Purpose</strong>: Validates that required indicator pairs exist in the dataset before running consistency analysis</p> <p><strong>Parameters:</strong></p> <ul> <li><code>consistency_params</code>: List containing consistency_pairs and consistency_ranges</li> <li><code>data</code>: The HMIS dataset</li> </ul> <p><strong>Returns</strong>: Updated consistency_params with only valid pairs (empty list if no valid pairs)</p> <p><strong>Process:</strong> 1. Checks which indicators are available in the dataset 2. Removes consistency pairs where one or both indicators are missing 3. Issues warnings about removed pairs 4. Returns empty list if no valid pairs remain</p> <p><strong>Example Output:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>Warning: Skipping pair_delivery - indicator &#39;delivery&#39; not found in data
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>Warning: Skipping pair_malaria - indicator &#39;rdt_positive_plus_micro&#39; not found in data
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>Remaining consistency pairs: pair_penta, pair_anc
</span></code></pre></div> </details> <details> <summary>outlier_analysis()</summary> <p><strong>Signature</strong>: <code>outlier_analysis(data, geo_cols, outlier_params)</code></p> <p><strong>Purpose</strong>: Identifies statistical outliers in facility service volumes using dual detection methods</p> <p><strong>Parameters:</strong></p> <ul> <li><code>data</code>: HMIS data with facility_id, indicator_common_id, period_id, count</li> <li><code>geo_cols</code>: Vector of geographic column names</li> <li><code>outlier_params</code>: List containing:</li> <li><code>outlier_pc_threshold</code>: Proportion threshold (default 0.8)</li> <li><code>count_threshold</code>: Minimum count threshold (default 100)</li> </ul> <p><strong>Returns</strong>: Dataframe with outlier flags and diagnostic metrics for each facility-indicator-period</p> <p><strong>Calculated Fields:</strong></p> <ul> <li><code>median_volume</code>: Median count by facility-indicator</li> <li><code>mad_volume</code>: MAD calculated on values &gt;= median</li> <li><code>mad_residual</code>: Standardized residual (|count - median| / MAD)</li> <li><code>outlier_mad</code>: Binary flag (1 if mad_residual &gt; MADS)</li> <li><code>pc</code>: Proportional contribution to annual total</li> <li><code>outlier_pc</code>: Binary flag (1 if pc &gt; threshold)</li> <li><code>outlier_flag</code>: Final flag (1 if either method flags AND count &gt; minimum threshold)</li> </ul> <p><strong>Algorithm Steps:</strong></p> <p><strong>Step 1</strong>: Calculate median volume for each facility-indicator combination</p> <p><strong>Step 2</strong>: Compute MAD using only values equal to or above the median - Avoids bias from facilities with many low-volume months - Standardizes residuals by dividing (count - median) by MAD - Flags outlier_mad = 1 if mad_residual &gt; MADS parameter</p> <p><strong>Step 3</strong>: Calculate proportional contribution - For each facility-indicator-year, sum total annual count - Calculate pc = count / annual_total - Flags outlier_pc = 1 if pc &gt; OUTLIER_PROPORTION_THRESHOLD</p> <p><strong>Step 4</strong>: Combine flags - Final outlier_flag = 1 if (outlier_mad = 1 OR outlier_pc = 1) AND count &gt; MINIMUM_COUNT_THRESHOLD - This ensures only substantial volumes are flagged</p> </details> <details> <summary>process_completeness()</summary> <p><strong>Signature</strong>: <code>process_completeness(outlier_data_main)</code></p> <p><strong>Purpose</strong>: Main orchestration function that generates complete time series and assigns completeness flags for all indicators</p> <p><strong>Parameters:</strong></p> <ul> <li><code>outlier_data_main</code>: Outlier analysis results (contains all facility-indicator-period combinations with counts)</li> </ul> <p><strong>Returns</strong>: Long format dataset with completeness flags for all facility-indicator-period combinations</p> <p><strong>Process:</strong></p> <ol> <li>Identifies first and last reporting period for each indicator globally</li> <li>Calls <code>generate_full_series_per_indicator()</code> for each indicator</li> <li>Applies completeness tagging logic (complete/incomplete/inactive)</li> <li>Merges with geographic metadata</li> <li>Combines results across all indicators</li> <li>Removes inactive periods (completeness_flag = 2)</li> </ol> <p><strong>Output Structure:</strong></p> <ul> <li>Explicit rows for both reported and non-reported periods</li> <li>Completeness flag: 0 (incomplete), 1 (complete), 2 (inactive - removed)</li> <li>Full time series from first to last reporting period per indicator</li> </ul> </details> <details> <summary>generate_full_series_per_indicator()</summary> <p><strong>Signature</strong>: <code>generate_full_series_per_indicator(outlier_data, indicator_id, timeframe)</code></p> <p><strong>Purpose</strong>: Creates a complete monthly time series for a specific indicator, filling in gaps where facilities did not report</p> <p><strong>Parameters:</strong></p> <ul> <li><code>outlier_data</code>: data.table with outlier results</li> <li><code>indicator_id</code>: Specific indicator to process (e.g., "penta1")</li> <li><code>timeframe</code>: Data table with first_pid and last_pid for each indicator</li> </ul> <p><strong>Returns</strong>: Complete time series with explicit rows for both reported and non-reported periods</p> <p><strong>Process:</strong></p> <ol> <li>Subsets data to specific indicator</li> <li>Generates monthly sequence from first to last period_id for that indicator</li> <li>Creates complete facility-period grid (all facilities × all months) using <code>CJ()</code> cross join</li> <li>Merges with actual reported data</li> <li>Missing counts indicate non-reporting periods</li> <li>Applies inactive detection algorithm</li> </ol> <p><strong>Inactive Detection Algorithm:</strong></p> <div class="language-r highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># A facility is flagged inactive (offline_flag = 2) if:</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=c1># 1. Missing 6+ consecutive months BEFORE first report, OR</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=c1># 2. Missing 6+ consecutive months AFTER last report</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=n>offline_flag</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nf>fifelse</span><span class=p>(</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>  </span><span class=p>(</span><span class=n>missing_group</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>missing_count</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=m>6</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=o>!</span><span class=n>first_report_idx</span><span class=p>)</span><span class=w> </span><span class=o>|</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>  </span><span class=p>(</span><span class=n>missing_group</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nf>max</span><span class=p>(</span><span class=n>missing_group</span><span class=p>)</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=n>missing_count</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=m>6</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=o>!</span><span class=n>last_report_idx</span><span class=p>),</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>  </span><span class=m>2L</span><span class=p>,</span><span class=w> </span><span class=m>0L</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=p>)</span>
</span></code></pre></div> <p><strong>Example Timeline:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>Facility A reporting pattern for indicator &quot;penta1&quot;:
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>Period:  202001 202002 202003 202004 202005 202006 202007 202008 202009 202010
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>Count:   NA     NA     NA     NA     50     30     NA     NA     40     35
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>Flag:    2      2      2      2      1      1      0      0      1      1
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>         [----Inactive----] [---Active period with gaps---]
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>Explanation:
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>- First 4 months: Inactive (6+ months missing before first report at 202005)
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>- 202005-202006: Complete (reported)
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>- 202007-202008: Incomplete (gaps in active period)
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>- 202009-202010: Complete (reported)
</span></code></pre></div> </details> <details> <summary>geo_consistency_analysis()</summary> <p><strong>Signature</strong>: <code>geo_consistency_analysis(data, geo_cols, geo_level, consistency_params)</code></p> <p><strong>Purpose</strong>: Calculates consistency ratios at the geographic level to account for patients seeking services across multiple facilities within a district/ward</p> <p><strong>Parameters:</strong></p> <ul> <li><code>data</code>: Outlier data (with outliers already flagged)</li> <li><code>geo_cols</code>: Vector of geographic column names</li> <li><code>geo_level</code>: Geographic level for aggregation (e.g., "admin_area_3")</li> <li><code>consistency_params</code>: List with consistency_pairs and consistency_ranges</li> </ul> <p><strong>Returns</strong>: Long format dataframe with geographic-level consistency results</p> <p><strong>Process:</strong></p> <ol> <li>Excludes outliers (sets count to NA where outlier_flag = 1)</li> <li>Aggregates data to specified geographic level by period (sums across facilities)</li> <li>Reshapes to wide format (one column per indicator)</li> <li>Calculates ratio for each indicator pair</li> <li>Flags consistency based on predefined ranges</li> </ol> <p><strong>Output Columns:</strong></p> <ul> <li>Geographic identifiers (up to specified level)</li> <li><code>period_id</code>: Time period</li> <li><code>ratio_type</code>: Name of the consistency pair (e.g., "pair_penta")</li> <li><code>consistency_ratio</code>: Calculated ratio value</li> <li><code>sconsistency</code>: Binary flag (1 = consistent, 0 = inconsistent, NA = cannot calculate)</li> </ul> <p><strong>Example Output:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>admin_area_2  admin_area_3  period_id  ratio_type    consistency_ratio  sconsistency
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>District_A    Ward_1        202401     pair_penta    1.05               1
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>District_A    Ward_1        202401     pair_anc      0.88               0
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>District_A    Ward_2        202401     pair_penta    0.97               1
</span></code></pre></div> <p><strong>Rationale</strong>: Measuring consistency at the geographic level accounts for patient movement between facilities and provides a more accurate picture of service utilization patterns across a community.</p> </details> <details> <summary>expand_geo_consistency_to_facilities()</summary> <p><strong>Signature</strong>: <code>expand_geo_consistency_to_facilities(facility_metadata, geo_consistency_results, geo_level)</code></p> <p><strong>Purpose</strong>: Assigns geographic-level consistency results to individual facilities</p> <p><strong>Parameters:</strong></p> <ul> <li><code>facility_metadata</code>: Facility list with geographic assignments</li> <li><code>geo_consistency_results</code>: Output from geo_consistency_analysis()</li> <li><code>geo_level</code>: Geographic level used in consistency analysis</li> </ul> <p><strong>Returns</strong>: Facility-level dataset with consistency flags</p> <p><strong>Process:</strong></p> <ul> <li>Extracts facility list with their geographic assignments</li> <li>Performs left join to replicate geo-level consistency scores to all facilities in that area</li> <li>Uses many-to-many relationship to handle multiple periods and ratio types</li> </ul> <p><strong>Rationale</strong>: Since consistency is measured at the geographic level (accounting for patient movement between facilities), all facilities within the same district/ward receive the same consistency scores.</p> </details> <details> <summary>dqa_with_consistency()</summary> <p><strong>Signature</strong>: <code>dqa_with_consistency(completeness_data, consistency_data, outlier_data, geo_cols, dqa_rules)</code></p> <p><strong>Purpose</strong>: Calculates comprehensive DQA scores including consistency checks when consistency pairs are available</p> <p><strong>Parameters:</strong></p> <ul> <li><code>completeness_data</code>: Output from process_completeness()</li> <li><code>consistency_data</code>: Wide-format facility consistency results</li> <li><code>outlier_data</code>: Output from outlier_analysis()</li> <li><code>geo_cols</code>: Vector of geographic column names</li> <li><code>dqa_rules</code>: List specifying required values for each dimension</li> </ul> <p><strong>DQA Rules Configuration:</strong></p> <div class="language-r highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=n>dqa_rules</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>list</span><span class=p>(</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=n>completeness</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1</span><span class=p>,</span><span class=w>   </span><span class=c1># Must be complete (flag = 1)</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=n>outlier_flag</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0</span><span class=p>,</span><span class=w>   </span><span class=c1># Must NOT be an outlier (flag = 0)</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>  </span><span class=n>sconsistency</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1</span><span class=w>    </span><span class=c1># Must be consistent (flag = 1)</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=p>)</span>
</span></code></pre></div> <p><strong>Scoring Algorithm:</strong></p> <p><strong>1. Completeness-Outlier Score</strong> (per facility-period): - Each DQA indicator scores 0-2 points (1 for completeness + 1 for no outlier) - Maximum possible = 2 × number of DQA indicators - Score = Total Points / Maximum Points</p> <p><strong>2. Consistency Score</strong> (per facility-period): - Only counts pairs where both indicators exist (NA pairs excluded from denominator) - Score = Number of passing pairs / Number of available pairs - If no pairs available, score = 0</p> <p><strong>3. Mean DQA Score:</strong> - Average of completeness-outlier score and consistency score - Formula: <code>(completeness_outlier_score + consistency_score) / 2</code></p> <p><strong>4. Binary DQA Score:</strong> - 1 if ALL available consistency pairs pass AND completeness-outlier score is perfect - 0 otherwise</p> <p><strong>Handling Missing Indicators:</strong> The function intelligently handles cases where some consistency indicators are missing: - NA values in consistency pairs are NOT replaced with 0 - Only available pairs contribute to the denominator - This prevents penalizing facilities for indicators they don't provide</p> <p><strong>Example Calculation:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>Facility X in period 202401:
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>- DQA Indicators: penta1, anc1, opd (3 indicators)
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>- Completeness: All 3 complete → 3 points
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>- Outliers: None → 3 points
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>- Total: 6/6 → completeness_outlier_score = 1.0
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>Consistency Pairs:
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>- pair_penta (penta1/penta3): Pass (1)
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>- pair_anc (anc1/anc4): Fail (0)
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>- pair_delivery: NA (bcg not a DQA indicator)
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>Consistency calculation:
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>- Available pairs: 2 (penta, anc)
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>- Passing pairs: 1 (penta)
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>- consistency_score = 1/2 = 0.5
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a>Final scores:
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a>- dqa_mean = (1.0 + 0.5) / 2 = 0.75
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a>- dqa_score = 0 (not all pairs passed)
</span></code></pre></div> </details> <details> <summary>dqa_without_consistency()</summary> <p><strong>Signature</strong>: <code>dqa_without_consistency(completeness_data, outlier_data, geo_cols, dqa_rules)</code></p> <p><strong>Purpose</strong>: Calculates DQA scores using only completeness and outlier checks when consistency data is unavailable or no valid consistency pairs exist</p> <p><strong>When Used:</strong></p> <ul> <li>No consistency pairs defined in configuration</li> <li>All consistency pairs have missing indicators</li> <li>Dataset doesn't contain paired indicators</li> </ul> <p><strong>Scoring:</strong></p> <ul> <li>Uses only completeness and outlier components</li> <li><code>dqa_mean</code> = <code>completeness_outlier_score</code></li> <li><code>dqa_score</code> = 1 if all completeness and outlier checks pass, 0 otherwise</li> </ul> <p><strong>Output Structure:</strong></p> <div class="language-r highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=n>dqa_results</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>data.frame</span><span class=p>(</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=n>facility_id</span><span class=p>,</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>  </span><span class=n>admin_area_X</span><span class=p>,</span><span class=w>              </span><span class=c1># Dynamic geographic columns</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>  </span><span class=n>period_id</span><span class=p>,</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>  </span><span class=n>completeness_outlier_score</span><span class=p>,</span><span class=w> </span><span class=c1># Range: 0-1</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>  </span><span class=n>dqa_mean</span><span class=p>,</span><span class=w>                   </span><span class=c1># Range: 0-1 (equals completeness_outlier_score)</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>  </span><span class=n>dqa_score</span><span class=w>                   </span><span class=c1># Binary: 0 or 1</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=p>)</span>
</span></code></pre></div> </details> <h3 id=statistical-methods-algorithms>Statistical Methods &amp; Algorithms<a class=headerlink href=#statistical-methods-algorithms title="Anchor link to this section">&para;</a></h3> <details> <summary>Median Absolute Deviation (MAD) Calculation</summary> <p>The MAD is a robust measure of variability that is less sensitive to outliers than standard deviation.</p> <p><strong>Standard MAD Algorithm:</strong> 1. Compute the median of the dataset 2. Calculate absolute deviations: |value - median| for each data point 3. Find the median of these absolute deviations</p> <p><strong>FASTR Modification:</strong> The module calculates MAD using only values at or above the median, making it more sensitive to high outliers while avoiding bias from facilities with many low-volume months.</p> <p><strong>Outlier Degree Calculation:</strong></p> <div class=arithmatex>\[ \text{MAD Residual} = \frac{|\text{volume} - \text{median volume}|}{\text{MAD}} \]</div> <p><strong>Outlier Classification:</strong> - If MAD Residual &gt; 10 (configurable via <code>MADS</code> parameter), the value is flagged as a statistical outlier</p> <p><strong>Example:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>Facility ABC, Indicator: penta1
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>Monthly counts: 20, 25, 22, 28, 24, 26, 150, 23, 27, 25, 21, 24
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>Step 1: Calculate median = 24.5
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>Step 2: Values &gt;= median: 25, 28, 24.5, 26, 150, 27, 25, 24.5
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>Step 3: Absolute deviations from median: 0.5, 3.5, 0, 1.5, 125.5, 2.5, 0.5, 0
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>Step 4: MAD = median(0, 0, 0.5, 0.5, 1.5, 2.5, 3.5, 125.5) = 1.0
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>Step 5: For count=150: MAD residual = |150 - 24.5| / 1.0 = 125.5
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>Step 6: 125.5 &gt; 10, therefore 150 is flagged as an outlier
</span></code></pre></div> </details> <details> <summary>Proportional Outlier Detection</summary> <p>This method identifies months where a single observation represents an unusually large proportion of the annual total for a facility-indicator combination.</p> <p><strong>Algorithm:</strong> 1. For each facility-indicator-year, sum the total annual count 2. Calculate the proportion: <code>pc = monthly_count / annual_total</code> 3. Flag as outlier if <code>pc &gt; OUTLIER_PROPORTION_THRESHOLD</code> (default 0.8)</p> <p><strong>Rationale:</strong> A facility reporting 80% of its annual volume in a single month likely indicates a data entry error (e.g., cumulative reporting instead of monthly, extra digit entered).</p> <p><strong>Example:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>Facility XYZ, Indicator: anc1, Year: 2024
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>Monthly counts: 15, 18, 12, 16, 890, 14, 17, 13, 16, 15, 14, 12
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>Annual total: 1052
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>For May (count=890):
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>pc = 890 / 1052 = 0.846
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>0.846 &gt; 0.8, therefore May is flagged as a proportional outlier
</span></code></pre></div> </details> <details> <summary>Consistency Ratio Benchmarks</summary> <p>The module applies programmatically defined benchmarks for indicator pairs:</p> <p><strong>ANC Consistency:</strong></p> <div class=arithmatex>\[ \text{ANC Consistency} = \begin{cases} 1, &amp; \frac{\text{ANC1 Volume}}{\text{ANC4 Volume}} \geq 0.95 \\ 0, &amp; \text{otherwise} \end{cases} \]</div> <p><strong>Interpretation</strong>: More women should start antenatal care (ANC1) than complete four visits (ANC4). The ratio is expected to be ≥ 0.95, allowing up to 5% tolerance for data variations.</p> <p><strong>Penta Consistency:</strong></p> <div class=arithmatex>\[ \text{Penta Consistency} = \begin{cases} 1, &amp; \frac{\text{Penta1 Volume}}{\text{Penta3 Volume}} \geq 0.95 \\ 0, &amp; \text{otherwise} \end{cases} \]</div> <p><strong>Interpretation</strong>: More children should receive the first pentavalent dose (Penta1) than complete the three-dose series (Penta3).</p> <p><strong>BCG/Delivery Consistency:</strong></p> <div class=arithmatex>\[ \text{BCG/Delivery Consistency} = \begin{cases} 1, &amp; 0.7 \leq \frac{\text{BCG Volume}}{\text{Delivery Volume}} \leq 1.3 \\ 0, &amp; \text{otherwise} \end{cases} \]</div> <p><strong>Interpretation</strong>: BCG is a birth dose vaccine, so BCG vaccinations should approximately equal facility deliveries. The wider range (±30%) accounts for infants born elsewhere receiving BCG at the facility or facility-born infants receiving BCG elsewhere.</p> <p><strong>Implementation Detail:</strong> Consistency is assessed at the district/ward level (specified by <code>GEOLEVEL</code>) to account for patients visiting multiple facilities within their local area for different services.</p> </details> <details> <summary>Completeness Calculation</summary> <p>For a given indicator in a given month:</p> <div class=arithmatex>\[ \text{Completeness} = \frac{\text{Number of reporting facilities}}{\text{Number of expected facilities}} \times 100 \]</div> <p><strong>Expected Facilities Definition:</strong> A facility is expected to report for an indicator if it has ever reported for that indicator within the analysis timeframe AND is not flagged as inactive.</p> <p><strong>Inactive Facility Definition:</strong> A facility is flagged as inactive for periods where it did not report for six or more consecutive months before its first report or after its last report.</p> <p><strong>Example:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>District has 20 facilities that have ever reported penta1 data in 2024
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>In March 2024:
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>- 18 facilities submitted penta1 data
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>- 2 facilities did not submit (but are not inactive)
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>Completeness = 18 / 20 × 100 = 90%
</span></code></pre></div> <p><strong>Important Note</strong>: A high level of completeness does not necessarily indicate that the HMIS is representative of all service delivery in the country, as some services may not be delivered in facilities or some facilities may not report. For countries where DHIS2 does not store zeros, indicator completeness may be underestimated if there are many low-volume facilities.</p> </details> <details> <summary>DQA Composite Score Calculation</summary> <p>The DQA score combines three quality dimensions for a defined set of core indicators.</p> <p><strong>Component Scores:</strong></p> <p><strong>1. Completeness-Outlier Score:</strong></p> <div class=arithmatex>\[ \text{Completeness-Outlier Score} = \frac{\sum (\text{completeness pass} + \text{outlier pass})}{2 \times \text{number of DQA indicators}} \]</div> <p><strong>2. Consistency Score:</strong></p> <div class=arithmatex>\[ \text{Consistency Score} = \frac{\text{Number of pairs passing benchmarks}}{\text{Number of available pairs}} \]</div> <p><strong>3. Mean DQA Score:</strong></p> <div class=arithmatex>\[ \text{DQA Mean} = \frac{\text{Completeness-Outlier Score} + \text{Consistency Score}}{2} \]</div> <p><strong>4. Binary DQA Score:</strong></p> <div class=arithmatex>\[ \text{DQA Score} = \begin{cases} 1, &amp; \text{if all checks passed} \\ 0, &amp; \text{otherwise} \end{cases} \]</div> <p><strong>Passing Criteria for Binary Score:</strong> - ALL DQA indicators must be complete (completeness_flag = 1) - ALL DQA indicators must be free of outliers (outlier_flag = 0) - ALL available consistency pairs must pass benchmarks (sconsistency = 1)</p> <p><strong>Example Calculation:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>Facility 123, Period 202403
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>DQA Indicators: penta1, anc1, opd
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>Completeness: penta1=1, anc1=1, opd=1 → 3 points
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>Outliers: penta1=0, anc1=0, opd=0 → 3 points
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>Completeness-Outlier Score = 6 / (2×3) = 1.0
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>Consistency Pairs:
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>- pair_penta: 1 (pass)
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>- pair_anc: 1 (pass)
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>Consistency Score = 2 / 2 = 1.0
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>DQA Mean = (1.0 + 1.0) / 2 = 1.0
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>DQA Score = 1 (all checks passed)
</span></code></pre></div> </details> <h3 id=code-examples>Code Examples<a class=headerlink href=#code-examples title="Anchor link to this section">&para;</a></h3> <details> <summary>Example 1: Running the Module with Default Settings</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># Set working directory</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=nf>setwd</span><span class=p>(</span><span class=s>&quot;/path/to/module/directory&quot;</span><span class=p>)</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=c1># Load required libraries</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=nf>library</span><span class=p>(</span><span class=n>zoo</span><span class=p>)</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=nf>library</span><span class=p>(</span><span class=n>stringr</span><span class=p>)</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=nf>library</span><span class=p>(</span><span class=n>dplyr</span><span class=p>)</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=nf>library</span><span class=p>(</span><span class=n>tidyr</span><span class=p>)</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=nf>library</span><span class=p>(</span><span class=n>data.table</span><span class=p>)</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a><span class=c1># The module will automatically:</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=c1># 1. Load hmis_ISO3.csv</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=c1># 2. Run all analyses with default parameters</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=c1># 3. Generate output CSV files in the working directory</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a><span class=nf>source</span><span class=p>(</span><span class=s>&quot;01_module_data_quality_assessment.R&quot;</span><span class=p>)</span>
</span></code></pre></div> </details> <details> <summary>Example 2: Adjusting Outlier Detection Sensitivity</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1># Make outlier detection more sensitive (lower thresholds)</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=n>OUTLIER_PROPORTION_THRESHOLD</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>0.6</span><span class=w>   </span><span class=c1># Flag if &gt;60% of annual volume (was 80%)</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=n>MINIMUM_COUNT_THRESHOLD</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>50</span><span class=w>         </span><span class=c1># Consider counts &gt;=50 (was 100)</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=n>MADS</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>8</span><span class=w>                             </span><span class=c1># Flag at 8 MADs (was 10)</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=c1># Run the module</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=nf>source</span><span class=p>(</span><span class=s>&quot;01_module_data_quality_assessment.R&quot;</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Use Case</strong>: Countries with generally low service volumes where the default thresholds are too conservative.</p> </details> <details> <summary>Example 3: Different Geographic Level for Consistency</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1># Use district level (admin_area_2) instead of sub-district (admin_area_3)</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=n>GEOLEVEL</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;admin_area_2&quot;</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=c1># This affects consistency analysis aggregation level</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=nf>source</span><span class=p>(</span><span class=s>&quot;01_module_data_quality_assessment.R&quot;</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Use Case</strong>: Sub-district level has sparse data or too few facilities per area, making district-level aggregation more stable.</p> </details> <details> <summary>Example 4: Custom DQA Indicators</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=c1># Focus DQA on maternal health indicators only</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=n>DQA_INDICATORS</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=s>&quot;anc1&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;anc4&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;delivery&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;pnc1&quot;</span><span class=p>)</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=c1># Only evaluate anc consistency pair</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=n>CONSISTENCY_PAIRS_USED</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=s>&quot;anc&quot;</span><span class=p>)</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=nf>source</span><span class=p>(</span><span class=s>&quot;01_module_data_quality_assessment.R&quot;</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Use Case</strong>: Specialized analysis focusing on a specific service area.</p> </details> <details> <summary>Example 5: Running for Different Country</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c1># Configure for your country</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=n>COUNTRY_ISO3</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;ISO3&quot;</span><span class=w>  </span><span class=c1># Replace with your country code</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=n>PROJECT_DATA_HMIS</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;hmis_ISO3.csv&quot;</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=n>GEOLEVEL</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;admin_area_3&quot;</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=c1># Adjust for country-specific indicators if needed</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=n>DQA_INDICATORS</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=s>&quot;penta1&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;anc1&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;opd&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;fp_new&quot;</span><span class=p>)</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=nf>source</span><span class=p>(</span><span class=s>&quot;01_module_data_quality_assessment.R&quot;</span><span class=p>)</span>
</span></code></pre></div> </details> <details> <summary>Example 6: Programmatic Use of Outputs</summary> <div class="language-r highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1># After running the module, work with outputs</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=c1># Load DQA results</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=n>dqa_results</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>read.csv</span><span class=p>(</span><span class=s>&quot;M1_output_dqa.csv&quot;</span><span class=p>)</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=c1># Filter to high-quality facility-months only</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=n>high_quality</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>dqa_results</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=w>  </span><span class=nf>filter</span><span class=p>(</span><span class=n>dqa_score</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>1</span><span class=p>)</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=c1># Calculate percentage of facility-months passing DQA by district</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=n>quality_by_district</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>dqa_results</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=w>  </span><span class=nf>group_by</span><span class=p>(</span><span class=n>admin_area_2</span><span class=p>,</span><span class=w> </span><span class=n>period_id</span><span class=p>)</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=w>  </span><span class=nf>summarize</span><span class=p>(</span>
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a><span class=w>    </span><span class=n>total_facility_months</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>n</span><span class=p>(),</span>
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a><span class=w>    </span><span class=n>passing_quality</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>sum</span><span class=p>(</span><span class=n>dqa_score</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>1</span><span class=p>),</span>
</span><span id=__span-23-16><a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a><span class=w>    </span><span class=n>pct_passing</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>100</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>passing_quality</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>total_facility_months</span>
</span><span id=__span-23-17><a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a><span class=w>  </span><span class=p>)</span>
</span><span id=__span-23-18><a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a>
</span><span id=__span-23-19><a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a><span class=c1># Identify facilities with consistently poor quality (never passing)</span>
</span><span id=__span-23-20><a id=__codelineno-23-20 name=__codelineno-23-20 href=#__codelineno-23-20></a><span class=n>poor_quality_facilities</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>dqa_results</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-23-21><a id=__codelineno-23-21 name=__codelineno-23-21 href=#__codelineno-23-21></a><span class=w>  </span><span class=nf>group_by</span><span class=p>(</span><span class=n>facility_id</span><span class=p>)</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-23-22><a id=__codelineno-23-22 name=__codelineno-23-22 href=#__codelineno-23-22></a><span class=w>  </span><span class=nf>summarize</span><span class=p>(</span>
</span><span id=__span-23-23><a id=__codelineno-23-23 name=__codelineno-23-23 href=#__codelineno-23-23></a><span class=w>    </span><span class=n>months_analyzed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>n</span><span class=p>(),</span>
</span><span id=__span-23-24><a id=__codelineno-23-24 name=__codelineno-23-24 href=#__codelineno-23-24></a><span class=w>    </span><span class=n>months_passed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>sum</span><span class=p>(</span><span class=n>dqa_score</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>1</span><span class=p>),</span>
</span><span id=__span-23-25><a id=__codelineno-23-25 name=__codelineno-23-25 href=#__codelineno-23-25></a><span class=w>    </span><span class=n>pct_passed</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>100</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>months_passed</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>months_analyzed</span>
</span><span id=__span-23-26><a id=__codelineno-23-26 name=__codelineno-23-26 href=#__codelineno-23-26></a><span class=w>  </span><span class=p>)</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-23-27><a id=__codelineno-23-27 name=__codelineno-23-27 href=#__codelineno-23-27></a><span class=w>  </span><span class=nf>filter</span><span class=p>(</span><span class=n>pct_passed</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>0</span><span class=p>)</span>
</span></code></pre></div> </details> <h3 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Anchor link to this section">&para;</a></h3> <details> <summary>Problem: Module skips consistency analysis</summary> <p><strong>Symptoms:</strong> - Console message: "No valid consistency pairs found" - M1_output_consistency_geo.csv has only headers - DQA scores calculated without consistency component</p> <p><strong>Diagnosis:</strong> Check that both indicators in each pair exist in your dataset:</p> <div class="language-r highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c1># Load your data</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=n>data</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>read.csv</span><span class=p>(</span><span class=s>&quot;hmis_[COUNTRY].csv&quot;</span><span class=p>)</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=c1># Check available indicators</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=nf>print</span><span class=p>(</span><span class=nf>unique</span><span class=p>(</span><span class=n>data</span><span class=o>$</span><span class=n>indicator_common_id</span><span class=p>))</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=c1># Compare with required pairs</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=c1># For pair_penta: need &quot;penta1&quot; and &quot;penta3&quot;</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=c1># For pair_anc: need &quot;anc1&quot; and &quot;anc4&quot;</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=c1># For pair_delivery: need &quot;bcg&quot; and &quot;delivery&quot; (or &quot;sba&quot;)</span>
</span></code></pre></div> <p><strong>Solutions:</strong> 1. Adjust <code>CONSISTENCY_PAIRS_USED</code> to only include pairs with available indicators 2. Modify indicator names in your data to match expected names 3. Accept that DQA will be calculated without consistency component</p> </details> <details> <summary>Problem: All facilities flagged as outliers</summary> <p><strong>Symptoms:</strong> - Very high percentage of outlier_flag = 1 in M1_output_outliers.csv - Most observations in outlier_list.csv</p> <p><strong>Diagnosis:</strong> Your thresholds may be too sensitive for your data context.</p> <p><strong>Solutions:</strong></p> <ol> <li>Increase MAD threshold:</li> </ol> <div class="language-r highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=n>MADS</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>15</span><span class=w>  </span><span class=c1># Increase from default 10</span>
</span></code></pre></div> <ol> <li>Increase proportion threshold:</li> </ol> <div class="language-r highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=n>OUTLIER_PROPORTION_THRESHOLD</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>0.9</span><span class=w>  </span><span class=c1># Increase from 0.8</span>
</span></code></pre></div> <ol> <li>Increase minimum count threshold (focus on larger facilities):</li> </ol> <div class="language-r highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=n>MINIMUM_COUNT_THRESHOLD</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=m>200</span><span class=w>  </span><span class=c1># Increase from 100</span>
</span></code></pre></div> <ol> <li>Review the data: Check if there are genuine quality issues requiring data cleaning rather than parameter adjustment</li> </ol> </details> <details> <summary>Problem: No DQA results generated</summary> <p><strong>Symptoms:</strong> - M1_output_dqa.csv is empty or has only headers - Console message: "Skipping DQA analysis - none of the required indicators found"</p> <p><strong>Diagnosis:</strong> None of the indicators specified in <code>DQA_INDICATORS</code> exist in your dataset.</p> <p><strong>Solution:</strong> Check which DQA indicators are missing:</p> <div class="language-r highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1># Load data</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=n>data</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>read.csv</span><span class=p>(</span><span class=s>&quot;hmis_[COUNTRY].csv&quot;</span><span class=p>)</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=c1># Check which DQA indicators are missing</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=n>available_indicators</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>unique</span><span class=p>(</span><span class=n>data</span><span class=o>$</span><span class=n>indicator_common_id</span><span class=p>)</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=n>missing_indicators</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>setdiff</span><span class=p>(</span><span class=n>DQA_INDICATORS</span><span class=p>,</span><span class=w> </span><span class=n>available_indicators</span><span class=p>)</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=nf>print</span><span class=p>(</span><span class=nf>paste</span><span class=p>(</span><span class=s>&quot;Missing DQA indicators:&quot;</span><span class=p>,</span><span class=w> </span><span class=nf>paste</span><span class=p>(</span><span class=n>missing_indicators</span><span class=p>,</span><span class=w> </span><span class=n>collapse</span><span class=o>=</span><span class=s>&quot;, &quot;</span><span class=p>)))</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=c1># Available DQA indicators</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=n>available_dqa</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>intersect</span><span class=p>(</span><span class=n>DQA_INDICATORS</span><span class=p>,</span><span class=w> </span><span class=n>available_indicators</span><span class=p>)</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=nf>print</span><span class=p>(</span><span class=nf>paste</span><span class=p>(</span><span class=s>&quot;Available DQA indicators:&quot;</span><span class=p>,</span><span class=w> </span><span class=nf>paste</span><span class=p>(</span><span class=n>available_dqa</span><span class=p>,</span><span class=w> </span><span class=n>collapse</span><span class=o>=</span><span class=s>&quot;, &quot;</span><span class=p>)))</span>
</span></code></pre></div> <p>Then update <code>DQA_INDICATORS</code> to include only available indicators:</p> <div class="language-r highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=n>DQA_INDICATORS</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=s>&quot;penta1&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;anc1&quot;</span><span class=p>)</span><span class=w>  </span><span class=c1># Only use what&#39;s available</span>
</span></code></pre></div> </details> <details> <summary>Problem: Consistency ratios seem incorrect</summary> <p><strong>Symptoms:</strong> - All consistency flags are 0 (inconsistent) - Consistency ratios are unexpectedly high or low</p> <p><strong>Diagnosis:</strong> The geographic aggregation level may be inappropriate for your data.</p> <p><strong>Investigation:</strong></p> <div class="language-r highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=c1># Load geographic consistency results</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=n>geo_cons</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>read.csv</span><span class=p>(</span><span class=s>&quot;M1_output_consistency_geo.csv&quot;</span><span class=p>)</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=c1># Check distribution of consistency ratios</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=nf>summary</span><span class=p>(</span><span class=n>geo_cons</span><span class=o>$</span><span class=n>consistency_ratio</span><span class=p>)</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=c1># Check sample sizes at geographic level</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=n>outliers</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>read.csv</span><span class=p>(</span><span class=s>&quot;M1_output_outliers.csv&quot;</span><span class=p>)</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=n>geo_summary</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>outliers</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=w>  </span><span class=nf>group_by</span><span class=p>(</span><span class=n>admin_area_3</span><span class=p>,</span><span class=w> </span><span class=n>period_id</span><span class=p>)</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=w>  </span><span class=nf>summarize</span><span class=p>(</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a><span class=w>    </span><span class=n>n_facilities</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>n_distinct</span><span class=p>(</span><span class=n>facility_id</span><span class=p>),</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a><span class=w>    </span><span class=n>total_volume</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>sum</span><span class=p>(</span><span class=n>count</span><span class=p>,</span><span class=w> </span><span class=n>na.rm</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>TRUE</span><span class=p>)</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=w>  </span><span class=p>)</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a><span class=nf>summary</span><span class=p>(</span><span class=n>geo_summary</span><span class=o>$</span><span class=n>n_facilities</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Solutions:</strong></p> <ol> <li>If geographic areas have very few facilities (1-2), use higher level:</li> </ol> <div class="language-r highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=n>GEOLEVEL</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;admin_area_2&quot;</span><span class=w>  </span><span class=c1># Use district instead of sub-district</span>
</span></code></pre></div> <ol> <li> <p>If ratios are generally below 0.95 for ANC/Penta pairs, this may indicate genuine programmatic issues (high dropout) rather than data quality problems</p> </li> <li> <p>Review the consistency benchmark ranges - they may need adjustment for your context:</p> </li> </ol> <div class="language-r highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c1># Example: Allow higher dropout (lower ratio) for Penta</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=n>all_consistency_ranges</span><span class=o>$</span><span class=n>pair_penta</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>c</span><span class=p>(</span><span class=n>lower</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>0.85</span><span class=p>,</span><span class=w> </span><span class=n>upper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>Inf</span><span class=p>)</span>
</span></code></pre></div> </details> <details> <summary>Problem: Completeness percentages seem low</summary> <p><strong>Symptoms:</strong> - High proportion of completeness_flag = 0 in M1_output_completeness.csv</p> <p><strong>Diagnosis:</strong> This could be legitimate (poor reporting) or an artifact of how your DHIS2 stores zero values.</p> <p><strong>Investigation:</strong></p> <div class="language-r highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c1># Load completeness data</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=n>completeness</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>read.csv</span><span class=p>(</span><span class=s>&quot;M1_output_completeness.csv&quot;</span><span class=p>)</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=c1># Check pattern: Are there explicit zeros or just missing values?</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=n>outliers</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>read.csv</span><span class=p>(</span><span class=s>&quot;M1_output_outliers.csv&quot;</span><span class=p>)</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=nf>table</span><span class=p>(</span><span class=nf>is.na</span><span class=p>(</span><span class=n>outliers</span><span class=o>$</span><span class=n>count</span><span class=p>),</span><span class=w> </span><span class=n>outliers</span><span class=o>$</span><span class=n>count</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>0</span><span class=p>)</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=c1># Check completeness by indicator</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a><span class=n>comp_by_indicator</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=n>completeness</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=w>  </span><span class=nf>group_by</span><span class=p>(</span><span class=n>indicator_common_id</span><span class=p>)</span><span class=w> </span><span class=o>%&gt;%</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=w>  </span><span class=nf>summarize</span><span class=p>(</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a><span class=w>    </span><span class=n>pct_complete</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>100</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nf>mean</span><span class=p>(</span><span class=n>completeness_flag</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>1</span><span class=p>),</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a><span class=w>    </span><span class=n>pct_incomplete</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>100</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nf>mean</span><span class=p>(</span><span class=n>completeness_flag</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>0</span><span class=p>)</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=w>  </span><span class=p>)</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a><span class=nf>print</span><span class=p>(</span><span class=n>comp_by_indicator</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Considerations:</strong> 1. If your DHIS2 doesn't store zeros, low-volume facilities may appear incomplete when they legitimately had no services to report 2. Completeness percentages should be interpreted in context - 70% completeness may be acceptable depending on the health system 3. Use the completeness_flag in subsequent modules to weight estimates appropriately</p> </details> <details> <summary>Problem: Error reading input file</summary> <p><strong>Symptoms:</strong> - Error: "Cannot open file 'hmis_[COUNTRY].csv'" - Module crashes during data loading</p> <p><strong>Solutions:</strong></p> <ol> <li>Check file path and working directory:</li> </ol> <div class="language-r highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=nf>getwd</span><span class=p>()</span><span class=w>  </span><span class=c1># Verify working directory</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=nf>list.files</span><span class=p>()</span><span class=w>  </span><span class=c1># Check if HMIS file is present</span>
</span></code></pre></div> <ol> <li> <p>Verify file name matches <code>PROJECT_DATA_HMIS</code> parameter</p> </li> <li> <p>Check file format (CSV, proper encoding, comma-separated)</p> </li> <li> <p>Ensure required columns exist:</p> </li> </ol> <div class="language-r highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1># After loading</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=nf>names</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w>  </span><span class=c1># Should include: facility_id, period_id, indicator_common_id, count</span>
</span></code></pre></div> </details> <h3 id=usage-notes>Usage Notes<a class=headerlink href=#usage-notes title="Anchor link to this section">&para;</a></h3> <details> <summary>Data Type Handling</summary> <p><strong>period_id Flexibility:</strong> The module accepts <code>period_id</code> in multiple formats: - Integer: <code>202401</code> - String: <code>"202401"</code> - Numeric: <code>202401.0</code></p> <p>All formats are internally converted to Date objects for correct chronological ordering:</p> <div class="language-r highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1># Internal conversion</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=nf>as.Date</span><span class=p>(</span><span class=nf>sprintf</span><span class=p>(</span><span class=s>&quot;%04d-%02d-01&quot;</span><span class=p>,</span><span class=w> </span><span class=n>year</span><span class=p>,</span><span class=w> </span><span class=n>month</span><span class=p>))</span>
</span></code></pre></div> <p>This ensures proper temporal ordering even with gaps in reporting periods.</p> <p><strong>Count Values:</strong> - Numeric values required (integers or decimals) - Zero counts should be explicit <code>0</code>, not <code>NA</code> - Missing counts represented as <code>NA</code> or absent rows</p> <p><strong>Geographic Columns:</strong> - Character type recommended - Can contain spaces and special characters - Case-sensitive in some operations</p> </details> <details> <summary>Missing Value Strategy</summary> <p>The module uses context-specific approaches to missing values:</p> <p><strong>Outlier Analysis:</strong> - NA values excluded from median/MAD calculations - Only non-NA values contribute to statistics - Prevents bias from sparse reporting</p> <p><strong>Completeness:</strong> - Explicit NA in count column indicates non-reporting - Assigned completeness_flag = 0 (incomplete) - Distinguished from inactive periods (flag = 2, removed)</p> <p><strong>Consistency:</strong> - NA ratios (from division by zero) kept as NA, not converted to 0 - NA pairs excluded from consistency scoring denominator - Prevents penalizing facilities for unavailable indicators</p> <p><strong>DQA Scoring:</strong> - NA consistency pairs excluded from denominator - Only available pairs affect consistency score - Allows partial scoring when some indicators missing</p> </details> <details> <summary>Memory Considerations</summary> <p>For large datasets (&gt;1 million rows), the module implements several optimizations:</p> <p><strong>data.table Usage:</strong> - Completeness processing uses <code>data.table</code> for in-place operations - Significantly faster and more memory-efficient than <code>dplyr</code> for large data</p> <p><strong>Filtering Strategy:</strong> - Filters to relevant indicators before expensive operations - Reduces memory footprint during calculations</p> <p><strong>Object Management:</strong> - Removes intermediate objects after use - Prevents memory accumulation during sequential processing</p> <p><strong>Recommendations for Large Datasets:</strong> - Allocate at least 8GB RAM for countries with &gt;1000 facilities - Consider processing by year if multi-year datasets cause memory issues - Monitor memory usage: <code>pryr::mem_used()</code> at various stages</p> </details> <details> <summary>Performance Optimization Opportunities</summary> <p><strong>Current Implementation:</strong> The completeness analysis processes indicators sequentially using <code>lapply()</code>.</p> <p><strong>Potential Enhancement:</strong> For datasets with many indicators, parallelization could improve performance:</p> <div class="language-r highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=c1># Future enhancement (not in current code)</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=nf>library</span><span class=p>(</span><span class=n>parallel</span><span class=p>)</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=c1># Detect available cores</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=n>n_cores</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>detectCores</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=m>1</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=c1># Parallel processing of indicators</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=n>completeness_list</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>mclapply</span><span class=p>(</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=w>  </span><span class=nf>unique</span><span class=p>(</span><span class=n>outlier_data_main</span><span class=o>$</span><span class=n>indicator_common_id</span><span class=p>),</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=w>  </span><span class=kr>function</span><span class=p>(</span><span class=n>ind</span><span class=p>)</span><span class=w> </span><span class=nf>generate_full_series_per_indicator</span><span class=p>(</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=w>    </span><span class=n>outlier_data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>outlier_data_main</span><span class=p>,</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a><span class=w>    </span><span class=n>indicator_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ind</span><span class=p>,</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=w>    </span><span class=n>timeframe</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>indicator_timeframe</span>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a><span class=w>  </span><span class=p>),</span>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a><span class=w>  </span><span class=n>mc.cores</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>n_cores</span>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=p>)</span>
</span><span id=__span-37-17><a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a>
</span><span id=__span-37-18><a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a><span class=c1># Combine results</span>
</span><span id=__span-37-19><a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a><span class=n>completeness_data</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>rbindlist</span><span class=p>(</span><span class=n>completeness_list</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Expected Speedup:</strong> - 3-4x faster with 4 cores on datasets with 10+ indicators - Most beneficial for countries with many indicators and long time series</p> </details> <details> <summary>Dynamic Indicator Selection</summary> <p>The module intelligently adapts to available data:</p> <p><strong>Delivery Indicator Selection:</strong></p> <div class="language-r highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=c1># Automatically chooses between &quot;delivery&quot; and &quot;sba&quot; for BCG consistency pair</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=kr>if</span><span class=w> </span><span class=p>(</span><span class=s>&quot;delivery&quot;</span><span class=w> </span><span class=o>%in%</span><span class=w> </span><span class=n>available_indicators</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=w>  </span><span class=n>PAIR_DELIVERY_B</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;delivery&quot;</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=p>}</span><span class=w> </span><span class=kr>else</span><span class=w> </span><span class=kr>if</span><span class=w> </span><span class=p>(</span><span class=s>&quot;sba&quot;</span><span class=w> </span><span class=o>%in%</span><span class=w> </span><span class=n>available_indicators</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=w>  </span><span class=n>PAIR_DELIVERY_B</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;sba&quot;</span><span class=w>  </span><span class=c1># Skilled birth attendant</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=p>}</span><span class=w> </span><span class=kr>else</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=w>  </span><span class=n>PAIR_DELIVERY_B</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=s>&quot;delivery&quot;</span><span class=w>  </span><span class=c1># Default fallback</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=p>}</span>
</span></code></pre></div> <p><strong>DQA Indicator Validation:</strong></p> <div class="language-r highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=c1># Only use DQA indicators that exist in the dataset</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=n>dqa_indicators_to_use</span><span class=w> </span><span class=o>&lt;-</span><span class=w> </span><span class=nf>intersect</span><span class=p>(</span><span class=n>DQA_INDICATORS</span><span class=p>,</span><span class=w> </span><span class=nf>unique</span><span class=p>(</span><span class=n>data</span><span class=o>$</span><span class=n>indicator_common_id</span><span class=p>))</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=c1># If none found, skip DQA analysis with informative message</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=kr>if</span><span class=w> </span><span class=p>(</span><span class=nf>length</span><span class=p>(</span><span class=n>dqa_indicators_to_use</span><span class=p>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=w>  </span><span class=nf>print</span><span class=p>(</span><span class=s>&quot;Skipping DQA analysis - none of the required indicators found&quot;</span><span class=p>)</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Consistency Pair Validation:</strong> The module checks each consistency pair and removes those with missing indicators, providing clear warnings about which pairs were skipped.</p> </details> <details> <summary>Error Handling and Fallbacks</summary> <p>The module includes robust error handling:</p> <p><strong>Missing Consistency Pairs:</strong> - If no valid pairs exist, skips consistency analysis - Uses <code>dqa_without_consistency()</code> for scoring - Outputs dummy files with proper headers</p> <p><strong>Missing Geographic Levels:</strong> - Falls back to lowest available admin level if specified <code>GEOLEVEL</code> not found - Issues warning about the fallback</p> <p><strong>Empty Results:</strong> - Creates CSV files with proper headers even when no data - Ensures downstream processes don't break</p> <p><strong>Missing Indicators:</strong> - Validates all indicator requirements before analysis - Warns about removed pairs - Continues with available indicators</p> </details> <details> <summary>Interpretation Guidelines</summary> <p><strong>Outlier Flags:</strong> - outlier_flag = 1 suggests potential data quality issues, but require investigation - Not all flagged outliers are errors (genuine service campaigns can trigger flags) - Use mad_residual and pc values to prioritize review</p> <p><strong>Completeness:</strong> - Completeness % varies by health system context - 80-90%+ is generally good, but depends on country - Trend over time more informative than absolute percentage - Low completeness for specific indicators may reflect genuine service gaps</p> <p><strong>Consistency:</strong> - sconsistency = 0 may indicate data quality issues OR programmatic performance issues (e.g., high dropout) - Requires programmatic knowledge to interpret - Geographic patterns can help distinguish systematic issues from random errors</p> <p><strong>DQA Scores:</strong> - dqa_score = 1 indicates data passed all checks, suitable for unadjusted use - dqa_score = 0 requires further investigation - dqa_mean provides nuanced view (0.75 = mostly good, 0.25 = mostly poor)</p> </details> <h3 id=data-quality-metrics-summary>Data Quality Metrics Summary<a class=headerlink href=#data-quality-metrics-summary title="Anchor link to this section">&para;</a></h3> <table> <thead> <tr> <th>Metric</th> <th>Type</th> <th>Range</th> <th>Interpretation</th> </tr> </thead> <tbody> <tr> <td>outlier_flag</td> <td>Binary</td> <td>0 or 1</td> <td>1 = Outlier detected by either method and count &gt; threshold</td> </tr> <tr> <td>outlier_mad</td> <td>Binary</td> <td>0 or 1</td> <td>1 = Statistical outlier (MAD-based)</td> </tr> <tr> <td>outlier_pc</td> <td>Binary</td> <td>0 or 1</td> <td>1 = Proportional outlier (&gt;80% of annual volume)</td> </tr> <tr> <td>mad_residual</td> <td>Continuous</td> <td>0 to ∞</td> <td>Standardized deviation from median (higher = more extreme)</td> </tr> <tr> <td>pc</td> <td>Continuous</td> <td>0 to 1</td> <td>Proportion of annual volume (closer to 1 = more concentrated)</td> </tr> <tr> <td>completeness_flag</td> <td>Categorical</td> <td>0, 1, 2</td> <td>0=Incomplete (missing), 1=Complete (reported), 2=Inactive (removed)</td> </tr> <tr> <td>sconsistency</td> <td>Binary</td> <td>0, 1, NA</td> <td>1=Consistent (passes benchmark), 0=Inconsistent, NA=Cannot calculate</td> </tr> <tr> <td>consistency_ratio</td> <td>Continuous</td> <td>0 to ∞</td> <td>Ratio of paired indicators (interpretation depends on pair)</td> </tr> <tr> <td>completeness_outlier_score</td> <td>Continuous</td> <td>0 to 1</td> <td>Proportion of DQA indicators passing completeness &amp; outlier checks</td> </tr> <tr> <td>consistency_score</td> <td>Continuous</td> <td>0 to 1</td> <td>Proportion of consistency pairs passing benchmarks</td> </tr> <tr> <td>dqa_mean</td> <td>Continuous</td> <td>0 to 1</td> <td>Average of component scores (overall quality measure)</td> </tr> <tr> <td>dqa_score</td> <td>Binary</td> <td>0 or 1</td> <td>1 = All checks passed (high quality), 0 = Any check failed</td> </tr> </tbody> </table> <h3 id=analysis-outputs-and-visualization>Analysis Outputs and Visualization<a class=headerlink href=#analysis-outputs-and-visualization title="Anchor link to this section">&para;</a></h3> <p>The FASTR analysis generates six main visual outputs:</p> <p><strong>1. Outliers Heatmap</strong></p> <p>Heatmap table with zones as rows and health indicators as columns, color-coded by outlier percentage.</p> <p><img alt="Percentage of facility-months that are outliers." src=../images/Default_1._Proportion_of_outliers.png></p> <p><strong>2. Indicator Completeness</strong></p> <p>Heatmap table with zones as rows and health indicators as columns, color-coded by completeness percentage.</p> <p><img alt="Percentage of facility-months with complete data." src=../images/Default_2._Proportion_of_completed_records.png></p> <p><strong>3. Indicator Completeness Over Time</strong></p> <p>Horizontal timeline charts showing completeness trends for each indicator over the analysis period.</p> <p><img alt="Percentage of facility-months with complete data over time." src=../images/Default_3._Proportion_of_completed_records_over_time.png></p> <p><strong>4. Internal Consistency</strong></p> <p>Heatmap table with zones as rows and consistency benchmark categories as columns, color-coded by performance.</p> <p><img alt="Percentage of sub-national areas meeting consistency benchmarks." src=../images/Default_4._Proportion_of_sub-national_areas_meeting_consistency_criteria.png></p> <p><strong>5. Overall DQA Score</strong></p> <p>Heatmap table with zones as rows and time periods as columns, color-coded by DQA score percentage.</p> <p><img alt="Percentage of facility-months with adequate data quality over time." src=../images/Default_5._Overall_DQA_score.png></p> <p><strong>6. Mean DQA Score</strong></p> <p>Heatmap table with zones as rows and time periods as columns, color-coded by average DQA score.</p> <p><img alt="Average data quality score across facility-months." src=../images/Default_6._Mean_DQA_score.png></p> <p><strong>Color Coding System:</strong> - <strong>Green</strong>: 90% or above (completeness/consistency), Below 1% (outliers) - <strong>Yellow</strong>: 80% to 89% (completeness), 1% to 2% (outliers) - <strong>Red</strong>: Below 80% (completeness/consistency), 3% or above (outliers)</p> <h3 id=execution-workflow>Execution Workflow<a class=headerlink href=#execution-workflow title="Anchor link to this section">&para;</a></h3> <p>The module follows this sequence:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a>1. DATA LOADING &amp; PREPROCESSING
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>   ├─ Load HMIS CSV file
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>   ├─ Convert period_id to dates
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a>   ├─ Detect geographic columns
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>   └─ Create composite malaria indicator (if applicable)
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a>2. CONFIGURATION &amp; VALIDATION
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a>   ├─ Detect available indicators
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a>   ├─ Dynamically select delivery indicator (delivery vs sba)
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a>   ├─ Build consistency pairs based on available indicators
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a>   ├─ Validate consistency pairs
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>   └─ Filter DQA indicators to available ones
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a>
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>3. OUTLIER ANALYSIS
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a>   ├─ Calculate median and MAD by facility-indicator
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a>   ├─ Flag MAD-based outliers (&gt;10 MADs)
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>   ├─ Flag proportion-based outliers (&gt;80% of annual volume)
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a>   └─ Combine flags (either method + count &gt; 100)
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a>
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a>4. COMPLETENESS ANALYSIS
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a>   ├─ Identify reporting timeframe per indicator
</span><span id=__span-40-22><a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a>   ├─ Generate full time series (all facilities × all months)
</span><span id=__span-40-23><a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a>   ├─ Tag reporting status (complete/incomplete/inactive)
</span><span id=__span-40-24><a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a>   └─ Remove inactive periods (6+ months before first/after last report)
</span><span id=__span-40-25><a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a>
</span><span id=__span-40-26><a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a>5. CONSISTENCY ANALYSIS (if applicable)
</span><span id=__span-40-27><a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a>   ├─ Exclude outliers from data
</span><span id=__span-40-28><a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a>   ├─ Aggregate to geographic level (e.g., district)
</span><span id=__span-40-29><a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a>   ├─ Calculate ratios for indicator pairs
</span><span id=__span-40-30><a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a>   ├─ Flag consistency based on predefined ranges
</span><span id=__span-40-31><a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a>   ├─ Expand geo-level results to facilities
</span><span id=__span-40-32><a id=__codelineno-40-32 name=__codelineno-40-32 href=#__codelineno-40-32></a>   └─ Pivot to wide format (one column per pair)
</span><span id=__span-40-33><a id=__codelineno-40-33 name=__codelineno-40-33 href=#__codelineno-40-33></a>
</span><span id=__span-40-34><a id=__codelineno-40-34 name=__codelineno-40-34 href=#__codelineno-40-34></a>6. DQA SCORING
</span><span id=__span-40-35><a id=__codelineno-40-35 name=__codelineno-40-35 href=#__codelineno-40-35></a>   ├─ Filter to DQA indicators only
</span><span id=__span-40-36><a id=__codelineno-40-36 name=__codelineno-40-36 href=#__codelineno-40-36></a>   ├─ Merge completeness, outlier, and consistency results
</span><span id=__span-40-37><a id=__codelineno-40-37 name=__codelineno-40-37 href=#__codelineno-40-37></a>   ├─ Calculate component scores:
</span><span id=__span-40-38><a id=__codelineno-40-38 name=__codelineno-40-38 href=#__codelineno-40-38></a>   │  ├─ Completeness-outlier score (0-1)
</span><span id=__span-40-39><a id=__codelineno-40-39 name=__codelineno-40-39 href=#__codelineno-40-39></a>   │  └─ Consistency score (0-1, if applicable)
</span><span id=__span-40-40><a id=__codelineno-40-40 name=__codelineno-40-40 href=#__codelineno-40-40></a>   ├─ Calculate mean DQA score
</span><span id=__span-40-41><a id=__codelineno-40-41 name=__codelineno-40-41 href=#__codelineno-40-41></a>   └─ Assign binary DQA pass/fail flag
</span><span id=__span-40-42><a id=__codelineno-40-42 name=__codelineno-40-42 href=#__codelineno-40-42></a>
</span><span id=__span-40-43><a id=__codelineno-40-43 name=__codelineno-40-43 href=#__codelineno-40-43></a>7. EXPORT RESULTS
</span><span id=__span-40-44><a id=__codelineno-40-44 name=__codelineno-40-44 href=#__codelineno-40-44></a>   ├─ M1_output_outlier_list.csv (outliers only)
</span><span id=__span-40-45><a id=__codelineno-40-45 name=__codelineno-40-45 href=#__codelineno-40-45></a>   ├─ M1_output_outliers.csv (all records with flags)
</span><span id=__span-40-46><a id=__codelineno-40-46 name=__codelineno-40-46 href=#__codelineno-40-46></a>   ├─ M1_output_completeness.csv (completeness flags)
</span><span id=__span-40-47><a id=__codelineno-40-47 name=__codelineno-40-47 href=#__codelineno-40-47></a>   ├─ M1_output_consistency_geo.csv (geo-level consistency)
</span><span id=__span-40-48><a id=__codelineno-40-48 name=__codelineno-40-48 href=#__codelineno-40-48></a>   ├─ M1_output_consistency_facility.csv (facility-level consistency)
</span><span id=__span-40-49><a id=__codelineno-40-49 name=__codelineno-40-49 href=#__codelineno-40-49></a>   └─ M1_output_dqa.csv (final DQA scores)
</span></code></pre></div> <hr> <h2 id=version-history>Version History<a class=headerlink href=#version-history title="Anchor link to this section">&para;</a></h2> <ul> <li><strong>2025-11-08</strong>: Restructured documentation for user-friendliness; separated overview/workflow from technical reference</li> <li><strong>2025-09-03</strong>: Updated methodology descriptions and statistical formulas</li> <li><strong>Previous</strong>: Initial module development and documentation</li> </ul> <hr> <p><strong>Module Author</strong>: CB - FASTR PROJECT</p> <p><strong>Last Code Edit</strong>: 2025-11-08</p> <p><strong>Last Documentation Edit</strong>: 2025-11-08</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../00_background_documentation/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Background"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Background </div> </div> </a> <a href=../02_module_data_quality_adjustments_documentation/ class="md-footer__link md-footer__link--next" aria-label="Next: Module 2 · Data Quality Adjustments"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Module 2 · Data Quality Adjustments </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 FASTR Methodology Documentation </div> </div> <div class=md-social> <a href=/ target=_blank rel=noopener title=Home class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272h16v176c0 35.3 28.7 64 64 64h288c35.3 0 64-28.7 64-64V272h16c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1zM240 320h32c26.5 0 48 21.5 48 48v96H192v-96c0-26.5 21.5-48 48-48"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "navigation.footer", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.tabs.link", "content.tooltips"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../javascripts/mathjax.js></script> <script src=https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>